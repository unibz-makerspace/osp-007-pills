/*** Classe Fotocellula ***/

#include <Arduino.h>

static const unsigned int NUMERO_CAMPIONAMENTI = 100;
static const unsigned int INTERVALLO_CAMPIONAMENTO = 200;

class Fotocellula
{
  private:
    // parametri inizializzati all'avvio
    unsigned short int p_fotocellulaPin;

    // variabili di stato
    unsigned short int valoriSensore[NUMERO_CAMPIONAMENTI];
    int s_soglia;
     
  public:
    unsigned short int inizializzaCalibrazione(const unsigned short int pinSensore, unsigned short int valoriSensore[], const unsigned int numeroCampionamenti, unsigned short int percentualeSoglia);
    unsigned short int calibra(const unsigned short int pinSensore, unsigned short int valoriSensore[], const unsigned int intervalloCampionamento, const unsigned int numeroCampionamenti, unsigned short int percentualeSoglia);   
    Fotocellula(unsigned short int  fotocellulaPin, int  soglia);
    boolean aggiorna();		// aggiorna la posizione del segnalatore al passare del tempo
};

